<!doctype html><html lang=en data-mode=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>A Simple Video Call App with python Sockets | g00g1y5p4's Blog</title><link rel=apple-touch-icon href=https://g00g1y5p4.github.io/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon-32x32.png sizes=32x32 type=image/png><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon-16x16.png sizes=16x16 type=image/png><link rel=manifest href=https://g00g1y5p4.github.io/images/favicons/manifest.json><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon.ico><meta name=keywords content><meta name=description content="This project is used to communicating a person in local network"><meta itemprop=name content="A Simple Video Call App with python Sockets"><meta itemprop=description content="This project is used to communicating a person in local network"><meta itemprop=datePublished content="2020-01-20T07:34:48+08:30"><meta itemprop=dateModified content="2020-01-20T07:34:48+08:30"><meta itemprop=wordCount content="861"><meta itemprop=image content="https://g00g1y5p4.github.io/posts/simplevideocallapp/images/_card.png"><meta itemprop=keywords content="ImageProcessing,openCV,"><meta property="og:title" content="A Simple Video Call App with python Sockets"><meta property="og:description" content="This project is used to communicating a person in local network"><meta property="og:type" content="article"><meta property="og:url" content="https://g00g1y5p4.github.io/posts/simplevideocallapp/"><meta property="og:image" content="https://g00g1y5p4.github.io/posts/simplevideocallapp/images/_card.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-20T07:34:48+08:30"><meta property="article:modified_time" content="2020-01-20T07:34:48+08:30"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://g00g1y5p4.github.io/posts/simplevideocallapp/images/_card.png"><meta name=twitter:title content="A Simple Video Call App with python Sockets"><meta name=twitter:description content="This project is used to communicating a person in local network"><meta name=twitter:site content="@g00g1y5p4"><link rel=preload href=https://g00g1y5p4.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://g00g1y5p4.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin=anonymous></noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Consolas" type=text/css media=all referrerpolicy=no-referrer><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code" type=text/css media=all><style>body{font-family:consolas}code{font-family:fira code}code{tab-size:4}</style></head><body><script src=https://g00g1y5p4.github.io/js/bootstrap.min.062c2e66b557cb779d59cedff7e0cc76e84beb665a1076e474e87d940be44245.js integrity="sha256-BiwuZrVXy3edWc7f9+DMduhL62ZaEHbkdOh9lAvkQkU=" crossorigin=anonymous></script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand me-3" href=https://g00g1y5p4.github.io/>g00g1y5p4's Blog</a>
<button class=navbar-social-share type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share">
<i class="fas fa-share-alt"></i></button><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=A%20Simple%20Video%20Call%20App%20with%20python%20Sockets&url=https%3a%2f%2fg00g1y5p4.github.io%2fposts%2fsimplevideocallapp%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fg00g1y5p4.github.io%2fposts%2fsimplevideocallapp%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i></button><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings><div class=offcanvas-header><h3 class=offcanvas-title>Settings</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><section class=setting><form class="font-size-switcher-form row"><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Font Size</label></div><div class="col-auto ms-auto"><input type=range class=form-range min=-2 max=2 id=fontSize></div></form></section><section class="setting palettes"><form class=row><div class=col-auto><label><i class="fas fa-fw fa-palette"></i> Palette</label></div><div class="col-auto ms-auto"><a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker><i class="fas fa-eye-dropper"></i></a></div></form><div class="mt-2 d-flex visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=Blue class="btn btn-sm palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label="Blue Gray" class="btn btn-sm palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=Brown class="btn btn-sm palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=Cyan class="btn btn-sm palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=Green class="btn btn-sm palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=Indigo class="btn btn-sm palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=Orange class="btn btn-sm palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=Pink class="btn btn-sm palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=Purple class="btn btn-sm palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=Red class="btn btn-sm palette" data-palette=red>
</button><button type=button id=palette-teal aria-label=Teal class="btn btn-sm palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=Yellow class="btn btn-sm palette" data-palette=yellow></button></div></section></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/archives/><i class="fas fa-fw fa-file-archive"></i>Archives</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/categories/><i class="fas fa-fw fa-folder"></i>Categories</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/tags/><i class="fas fa-fw fa-tags"></i>Tags</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/series/><i class="fas fa-fw fa-columns"></i>Series</a></li></ul></div></div></nav></header><main role=main class=container><div class="row content"><div class=col-lg-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class=card-body><ol class=breadcrumb><li class=breadcrumb-item><a href=https://g00g1y5p4.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://g00g1y5p4.github.io/posts/>Posts</a></li><li class="breadcrumb-item active">A Simple Video Call App With Python Sockets</li></ol></div></nav><article class="row card component mb-4 post"><div class=post-panel-wrapper><div class="d-flex flex-column component rounded post-panel"><a id=sidebarToggler class="action d-none d-lg-block" role=button><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a></div></div><div class=card-body><h1 class="card-title my-3">A Simple Video Call App With Python Sockets</h1><div class=post-meta><span class=post-date title="created on"><i class="fas fa-fw fa-calendar-alt"></i>Jan 20, 2020
</span><span class=post-reading-time title="reading time"><i class="fas fa-fw fa-coffee"></i>5 min read
</span><a href=https://g00g1y5p4.github.io/categories/socket/ class="badge rounded-pill text-white bg-primary post-taxonomy">Socket</a><a href=https://g00g1y5p4.github.io/tags/imageprocessing/ class="badge rounded-pill text-white bg-primary post-taxonomy">ImageProcessing</a><a href=https://g00g1y5p4.github.io/tags/opencv/ class="badge rounded-pill text-white bg-primary post-taxonomy">openCV</a></div><div class="post-content mb-3"><h3 id=introduction>Introduction</h3><p>Hey matesðŸ˜Š. How are you? Hope you all are begin good.By the way, This is my first blog. Did you know my name ðŸ¥±? Well, I am Akash.</p><h4 id=why-we-are-here>Why we are here?</h4><p>To make some fun? ðŸ˜•! No, But we&rsquo;re here to learn something new in a funny way. Funny while learningðŸ˜’? Yeah!.,</p><p>By the way, What&rsquo;s the new thing? Guess? ðŸ¤”ðŸ¤”.. How to copy some code from StackOverflow easily using python? ðŸ˜…, No. We are here to learn How to code <strong>Simple VideoCall App with python sockets</strong>.</p><p>VideoCall App? Android Application ah? No, Just a simple python interpreter application. But useful for future stepðŸ˜Š.</p><h4 id=about-project->About project ..!</h4><p>This is a simple VideoCallApp created with python script using sockets and opencv. We are creating a simple TCP protocol using python sockets. We will read Video data from camera or webcam using opencv and Audio from microphone using pyAudio which are under Async function. I&rsquo;m using two open ports to make communication between server and client. One port is for Video Transmission and one port is for Audio Transmission. I think by using two ports there will be no disturbances in socket communication.</p><h4 id=why-i-did-this-project->Why I did this project ?</h4><p>I think it&rsquo;s 2019 September. I was studying Engg-1. Most of my friends are using smartphones and I&rsquo;m using a Jio smartPhone(KeyBoard phone).
I was very curious about networking at that time. My friends are doing Videochat with thier friends in smartphone, but I dont have one. One day I got this idea, why don&rsquo;t I made my own VideoCallingApp. I was already knew Image processing and openCV. So I can manage VideoStream and Audio too. That&rsquo;s why I decided to do this App.</p><h4 id=libraries>Libraries</h4><p>I&rsquo;m using python to create this Application. Here are the list of libraries I had used to build this application</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cv2</span><span class=o>,</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pyaudio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pickle</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span><span class=o>,</span><span class=nn>time</span>
</span></span></code></pre></div><ul><li>Socket is python Library used to connect two nodes on a network to communicate with each other. One socket(node) listens on a particular port at an IP, while the other socket reaches out to the other to form a connection. The server forms the listener socket while the client reaches out to the server.</li><li>pyAudio is used to read and write data from microphone.</li><li>opencv is also used to read data from webcam</li></ul><h4 id=how-to-create-socket-and-bind-connection>How to create socket and Bind connection</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>## serverside</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket</span><span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span><span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket</span><span class=o>.</span><span class=n>bind</span><span class=p>((</span><span class=s1>&#39;IP&#39;</span><span class=p>,</span><span class=s1>&#39;PORT&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket</span><span class=o>.</span><span class=n>listen</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>conn</span> <span class=p>,</span> <span class=n>addr</span> <span class=o>=</span> <span class=n>simpleSocket</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>conn</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=sa>b</span><span class=s2>&#34;123 -- sent by server&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## clientSide</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket_</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span><span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket_</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>&#39;IP&#39;</span><span class=p>,</span><span class=s1>&#39;PORT&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>simpleSocket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>21</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>b'123 -- sent by server'
</code></pre><p>This is the example of simple socket connection between a server and client. AF_INET is the Internet address family for IPv4. SOCK_STREAM is the socket type for TCP, the protocol that will be used to transport our messages in the network.</p><h4 id=read-data-from-webcam-and-microphone>Read data from webCam and MicroPhone</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>## reading data from webCamera</span>
</span></span><span class=line><span class=cl><span class=n>video</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>VideoCapture</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_</span><span class=p>,</span> <span class=n>frame</span> <span class=o>=</span> <span class=n>video</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>video</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## Reading data from microPhone</span>
</span></span><span class=line><span class=cl><span class=n>chunk</span> <span class=o>=</span> <span class=mi>1024</span>
</span></span><span class=line><span class=cl><span class=n>FORMAT</span> <span class=o>=</span> <span class=n>pyaudio</span><span class=o>.</span><span class=n>paInt16</span>
</span></span><span class=line><span class=cl><span class=n>CHANNELS</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>RATE</span> <span class=o>=</span> <span class=mi>44100</span>
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=n>pyaudio</span><span class=o>.</span><span class=n>PyAudio</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>#initializing microphone</span>
</span></span><span class=line><span class=cl><span class=n>stream</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=nb>format</span> <span class=o>=</span> <span class=n>FORMAT</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>channels</span> <span class=o>=</span> <span class=n>CHANNELS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>rate</span> <span class=o>=</span> <span class=n>RATE</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nb>input</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=n>frames_per_buffer</span> <span class=o>=</span> <span class=n>chunk</span>
</span></span><span class=line><span class=cl>		<span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>stream</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>stream</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>prints ImageData in RGB array format 
prints AudioData in 1D array format
</code></pre><h4 id=sending-and-receiving-data-from-socket>Sending and Receiving Data from socket</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>#####################     ImageData      ################</span>
</span></span><span class=line><span class=cl><span class=c1>## serverSide</span>
</span></span><span class=line><span class=cl><span class=n>length</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>length</span><span class=o>&lt;</span><span class=mi>921764</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>pac</span><span class=o>=</span><span class=n>simpleSocket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>9999999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>length</span><span class=o>+=</span><span class=nb>len</span><span class=p>(</span><span class=n>pac</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>data</span><span class=o>+=</span><span class=n>pac</span>
</span></span><span class=line><span class=cl><span class=n>receivedImage</span><span class=o>=</span><span class=n>pickle</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## clientSide</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>img_data</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=o>=</span><span class=n>pickle</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>simpleSocket_</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>####################      AudioData     #################</span>
</span></span><span class=line><span class=cl><span class=c1>#serverSide</span>
</span></span><span class=line><span class=cl><span class=n>audioData</span> <span class=o>=</span> <span class=n>simpleSocket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>audioData</span> <span class=o>=</span> <span class=n>pickle</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>audioData</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>stream</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>audioData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#clientSide</span>
</span></span><span class=line><span class=cl><span class=n>data</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>simpleSocket_</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>receivedImage =&gt; imageData is sent from client's socket and received to server's socket

stream.write =&gt; audio data is read from microphone and sent from client's socket and received to server's socket and writes data on stream
</code></pre><p>That&rsquo;s it! We partially completed our main goal of the project. We received Image data and mircoPhone data from client to server for one time.</p><p>But the thing is, If we run a loop to send and retreive data from client to server its like first it sends image data and then microphone data. Again repeat..!. But we want Async data retreival from client to run video and audio simultaneously. So we use Threads to do this.</p><h4 id=async>Async</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>#####################      ClientSide         #################</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Thread</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>recordAudio</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>simpleSocket_</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sendVideo</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>conn</span><span class=p>,</span><span class=n>video</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>_</span><span class=p>,</span><span class=n>frame</span><span class=o>=</span><span class=n>video</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>img_data</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>=</span><span class=n>pickle</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>img_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>video</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sendVideo</span> <span class=o>=</span> <span class=n>serverVideo</span><span class=o>.</span><span class=n>sendVideo</span>
</span></span><span class=line><span class=cl><span class=n>sendAudio</span> <span class=o>=</span> <span class=n>serverAudio</span><span class=o>.</span><span class=n>recordAudio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sendV</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span> <span class=o>=</span> <span class=n>sendVideo</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sendA</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span> <span class=o>=</span> <span class=n>sendAudio</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>recvA</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sendA</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=c1>#######################        serverSide           #################</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Thread</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>rcvAudio</span><span class=p>():</span>
</span></span><span class=line><span class=cl>     <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>audioData</span> <span class=o>=</span> <span class=n>simpleSocket</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=n>audioData</span> <span class=o>=</span> <span class=n>pickle</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>audioData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=n>stream</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>audioData</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>recvVideo</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>conn</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>=</span><span class=sa>b</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>length</span><span class=o>=</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>length</span><span class=o>&lt;</span><span class=mi>921764</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>pac</span><span class=o>=</span><span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>9999999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>length</span><span class=o>+=</span><span class=nb>len</span><span class=p>(</span><span class=n>pac</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>data</span><span class=o>+=</span><span class=n>pac</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	            <span class=n>imgData</span><span class=o>=</span><span class=n>pickle</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	            <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&#34;ClientData&#34;</span><span class=p>,</span><span class=n>imgData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	            <span class=n>key</span><span class=o>=</span><span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	            <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=mi>27</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	                <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>recvVideo</span> <span class=o>=</span> <span class=n>serverVideo</span><span class=o>.</span><span class=n>recvVideo</span>
</span></span><span class=line><span class=cl><span class=n>recvAudio</span> <span class=o>=</span> <span class=n>serverAudio</span><span class=o>.</span><span class=n>rcvAudio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>recvA</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span> <span class=o>=</span> <span class=n>recvAudio</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>recvV</span> <span class=o>=</span> <span class=n>Thread</span><span class=p>(</span><span class=n>target</span> <span class=o>=</span> <span class=n>recvVideo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>recvV</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sendV</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></div><pre><code>Now, server gets continious data of Clients Video and Audio.
</code></pre><p>Now, We just have to write receieve functions for Image and Audio data in client side and sending function in serverside.</p><p><a href=https://github.com/g00g1y5p4/simpleVideoCallApp/ target=_blank rel="noopener noreferrer">simpleVideoCallApp</a></p><p>Hope you guys like and Subscribe to this Utube account ðŸ˜‚ðŸ˜‚.</p><hr><pre tabindex=0><code></code></pre><h5 align=center id=thanks-for-reading>Thanks for reading!</h5></div><hr><div class="post-navs d-flex mb-3 justify-content-evenly"><div class="post-nav post-prev"><div class="post-nav post-next"><a href=https://g00g1y5p4.github.io/posts/2048withpython/>2048 With Python</a>
<i class="fas fa-fw fa-chevron-right"></i></div></div></div></article></div></div><aside class="col-lg-4 sidebar d-flex"><div class=container><section class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Akash Thota" src=https://g00g1y5p4.github.io/images/me.png loading=lazy></div><div class="col-12 profile-meta"><div class=profile-name>Akash Thota</div><div class=profile-bio>Intrested in integration Machine Learning with Computer Vision</div><div class=profile-company><i class="fas fa-fw fa-building"></i> ...</div><br><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i> India</div><br><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=https://g00g1y5p4.github.io/about/> About Me</a></div><br></div></div></section><section class="recent-posts row card component"><div class=card-body><h2 class=card-title>Recent Posts</h2><ul><li><a href=https://g00g1y5p4.github.io/posts/depthestimationofapothole/>Depth Estimation of a Pothole on Roads</a></li><li><a href=https://g00g1y5p4.github.io/posts/vehicleaccidentdetectionusingfpga/>Vehicle Accident Detection Using FPGA</a></li><li><a href=https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/>Driver Drowsiness Detection</a></li><li><a href=https://g00g1y5p4.github.io/posts/imagrestorationusinggans_1/>Image Restoration Using GAN's Part-1</a></li><li><a href=https://g00g1y5p4.github.io/posts/imagerestorationusinggans_2/>Image Restoration Using GAN's Part-2</a></li></ul></div></section><section class="taxonomies row card component"><div class=card-body><h2 class=card-title><a href=https://g00g1y5p4.github.io/categories>Categories</a></h2><div><a href=https://g00g1y5p4.github.io/categories/gans/ class="badge bg-primary text-white rounded post-taxonomy" title="GAN's">GAN's
</a><a href=https://g00g1y5p4.github.io/categories/computer-vision/ class="badge bg-primary text-white rounded post-taxonomy" title="Computer Vision">Computer Vision
</a><a href=https://g00g1y5p4.github.io/categories/fpga/ class="badge bg-primary text-white rounded post-taxonomy" title=FPGA>FPGA
</a><a href=https://g00g1y5p4.github.io/categories/game/ class="badge bg-primary text-white rounded post-taxonomy" title=Game>Game
</a><a href=https://g00g1y5p4.github.io/categories/socket/ class="badge bg-primary text-white rounded post-taxonomy" title=Socket>Socket</a></div></div></section><section class="taxonomies row card component"><div class=card-body><h2 class=card-title><a href=https://g00g1y5p4.github.io/tags>Tags</a></h2><div><a href=https://g00g1y5p4.github.io/tags/image-processing/ class="badge bg-primary text-white rounded post-taxonomy" title="Image Processing">Image Processing
</a><a href=https://g00g1y5p4.github.io/tags/deep-learning/ class="badge bg-primary text-white rounded post-taxonomy" title="Deep Learning">Deep Learning
</a><a href=https://g00g1y5p4.github.io/tags/machine-learning/ class="badge bg-primary text-white rounded post-taxonomy" title="Machine Learning">Machine Learning
</a><a href=https://g00g1y5p4.github.io/tags/de10nano/ class="badge bg-primary text-white rounded post-taxonomy" title=DE10Nano>DE10Nano
</a><a href=https://g00g1y5p4.github.io/tags/face-detection/ class="badge bg-primary text-white rounded post-taxonomy" title="Face Detection">Face Detection
</a><a href=https://g00g1y5p4.github.io/tags/imageprocessing/ class="badge bg-primary text-white rounded post-taxonomy" title=ImageProcessing>ImageProcessing
</a><a href=https://g00g1y5p4.github.io/tags/nodemcu/ class="badge bg-primary text-white rounded post-taxonomy" title=NodeMCU>NodeMCU
</a><a href=https://g00g1y5p4.github.io/tags/opencv/ class="badge bg-primary text-white rounded post-taxonomy" title=openCV>openCV</a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" target=_blank href=https://discord.com/invite/g00g1y5p4 title=Discord rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-discord"></i>
</a><a class="nav-link social-link" href=mailto:g00g1y5p4@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/g00g1y5p4 title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://linkedin.com/in/g00g1y5p4 title=LinkedIn rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-linkedin-in"></i>
</a><a class="nav-link social-link" target=_blank href=https://twitter.com/g00g1y5p4 title=Twitter rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-twitter"></i></a></nav><div class="copyright mb-2">Copyright Â© 2018-2022 Akash Thota. All Rights Reserved.</div></footer><script src=https://g00g1y5p4.github.io/js/bundle.min.21f40383829a5e09e1bc7814b9d60ac04991f88e25e212dc4d1f8335ea724d96.js integrity="sha256-IfQDg4KaXgnhvHgUudYKwEmR+I4l4hLcTR+DNepyTZY=" crossorigin=anonymous defer></script><script defer src=https://g00g1y5p4.github.io/js/viewer.min.d5e689af442b462d0316719f47a5500dee615db035e8fb1b699f07fefa700fd1.js integrity="sha256-1eaJr0QrRi0DFnGfR6VQDe5hXbA16PsbaZ8H/vpwD9E=" crossorigin=anonymous></script><script defer src=https://g00g1y5p4.github.io/js/katex.min.420100d264e66fa287a9e08a59a7ebc37c67ea27d3fe010c94a77e03dd06d3fc.js integrity="sha256-QgEA0mTmb6KHqeCKWafrw3xn6ifT/gEMlKd+A90G0/w=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-213801925-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>