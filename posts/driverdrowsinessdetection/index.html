<!doctype html><html lang=en data-mode=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Driver Drowsiness Detection | g00g1y5p4's Blog</title><link rel=apple-touch-icon href=https://g00g1y5p4.github.io/images/favicons/apple-touch-icon.png sizes=180x180><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon-32x32.png sizes=32x32 type=image/png><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon-16x16.png sizes=16x16 type=image/png><link rel=manifest href=https://g00g1y5p4.github.io/images/favicons/manifest.json><link rel=icon href=https://g00g1y5p4.github.io/images/favicons/favicon.ico><meta name=keywords content><meta name=description content="Detecting Driver face and detect drowsiness and then alert driver"><meta itemprop=name content="Driver Drowsiness Detection"><meta itemprop=description content="Detecting Driver face and detect drowsiness and then alert driver"><meta itemprop=datePublished content="2020-10-10T07:34:48+08:30"><meta itemprop=dateModified content="2020-10-10T07:34:48+08:30"><meta itemprop=wordCount content="651"><meta itemprop=image content="https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/_card.png"><meta itemprop=keywords content="Face Detection,Image Processing,"><meta property="og:title" content="Driver Drowsiness Detection"><meta property="og:description" content="Detecting Driver face and detect drowsiness and then alert driver"><meta property="og:type" content="article"><meta property="og:url" content="https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/"><meta property="og:image" content="https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/_card.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-10T07:34:48+08:30"><meta property="article:modified_time" content="2020-10-10T07:34:48+08:30"><meta name=twitter:card content="summary"><meta name=twitter:image content="https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/_card.png"><meta name=twitter:title content="Driver Drowsiness Detection"><meta name=twitter:description content="Detecting Driver face and detect drowsiness and then alert driver"><meta name=twitter:site content="@g00g1y5p4"><link rel=preload href=https://g00g1y5p4.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://g00g1y5p4.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin=anonymous></noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Consolas" type=text/css media=all referrerpolicy=no-referrer><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Fira+Code" type=text/css media=all><style>body{font-family:consolas}code{font-family:fira code}code{tab-size:4}</style></head><body><script src=https://g00g1y5p4.github.io/js/bootstrap.min.062c2e66b557cb779d59cedff7e0cc76e84beb665a1076e474e87d940be44245.js integrity="sha256-BiwuZrVXy3edWc7f9+DMduhL62ZaEHbkdOh9lAvkQkU=" crossorigin=anonymous></script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand me-3" href=https://g00g1y5p4.github.io/>g00g1y5p4's Blog</a>
<button class=navbar-social-share type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share">
<i class="fas fa-share-alt"></i></button><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=Driver%20Drowsiness%20Detection&url=https%3a%2f%2fg00g1y5p4.github.io%2fposts%2fdriverdrowsinessdetection%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fg00g1y5p4.github.io%2fposts%2fdriverdrowsinessdetection%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i></button><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings><div class=offcanvas-header><h3 class=offcanvas-title>Settings</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><section class=setting><form class="font-size-switcher-form row"><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Font Size</label></div><div class="col-auto ms-auto"><input type=range class=form-range min=-2 max=2 id=fontSize></div></form></section><section class="setting palettes"><form class=row><div class=col-auto><label><i class="fas fa-fw fa-palette"></i> Palette</label></div><div class="col-auto ms-auto"><a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker><i class="fas fa-eye-dropper"></i></a></div></form><div class="mt-2 d-flex visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=Blue class="btn btn-sm palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label="Blue Gray" class="btn btn-sm palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=Brown class="btn btn-sm palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=Cyan class="btn btn-sm palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=Green class="btn btn-sm palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=Indigo class="btn btn-sm palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=Orange class="btn btn-sm palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=Pink class="btn btn-sm palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=Purple class="btn btn-sm palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=Red class="btn btn-sm palette" data-palette=red>
</button><button type=button id=palette-teal aria-label=Teal class="btn btn-sm palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=Yellow class="btn btn-sm palette" data-palette=yellow></button></div></section></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/archives/><i class="fas fa-fw fa-file-archive"></i>Archives</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/categories/><i class="fas fa-fw fa-folder"></i>Categories</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/tags/><i class="fas fa-fw fa-tags"></i>Tags</a></li><li class=nav-item><a class=nav-link href=https://g00g1y5p4.github.io/series/><i class="fas fa-fw fa-columns"></i>Series</a></li></ul></div></div></nav></header><main role=main class=container><div class="row content"><div class=col-lg-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class=card-body><ol class=breadcrumb><li class=breadcrumb-item><a href=https://g00g1y5p4.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://g00g1y5p4.github.io/posts/>Posts</a></li><li class="breadcrumb-item active">Driver Drowsiness Detection</li></ol></div></nav><article class="row card component mb-4 post"><div class=post-panel-wrapper><div class="d-flex flex-column component rounded post-panel"><a id=sidebarToggler class="action d-none d-lg-block" role=button><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a></div></div><div class=card-body><h1 class="card-title my-3">Driver Drowsiness Detection</h1><div class=post-meta><span class=post-date title="created on"><i class="fas fa-fw fa-calendar-alt"></i>Oct 10, 2020
</span><span class=post-reading-time title="reading time"><i class="fas fa-fw fa-coffee"></i>4 min read
</span><a href=https://g00g1y5p4.github.io/categories/computer-vision/ class="badge rounded-pill text-white bg-primary post-taxonomy">Computer Vision</a><a href=https://g00g1y5p4.github.io/tags/face-detection/ class="badge rounded-pill text-white bg-primary post-taxonomy">Face Detection</a><a href=https://g00g1y5p4.github.io/tags/image-processing/ class="badge rounded-pill text-white bg-primary post-taxonomy">Image Processing</a></div><div class="post-content mb-3"><p>Hi guys,How are you? I hope you guys are fine and missing my blogs so much.. Hah!!</p><p>This time I coming with a new topic mostly based on Image processing and ComputerVision technologies. Its sounds little bit different than previous blog, isn&rsquo;t it? In this blog, we address a drowsy driver alert system that has been developed using such a technique in which the Video Stream Processing (VSP) is analyzed by eye blink concept through an Eye Aspect Ratio (EAR) and Euclidean distance of the eye. Face landmark algorithm is also used as a proper way to eye detection. When the driver’s fatigue is detected, the IoT module issues a warning message along with impact of collision and location information, thereby alerting with the help of a voice speaking through the Raspberry Pi monitoring system.
<img class=img-fluid alt=images/1.jpg src=https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/1.jpg loading=lazy width=750 height=500></p><p>Lets dive into the problem and discuss how this can be solve by using Image Processing techniques.First of all what we need to do in this problem is to Detect face and eyes to calculate EAR ratio of eyes.
So If a face is found, we apply facial landmark detection and extract the regions.Now that we have the eye regions, so we can calculate EAR to check whether the eyes are closed or not..! Initially I didn&rsquo;t get correct output until many trails and errors.</p><h3 id=lets-start--include-required-libraries>Lets start .. include required libraries</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span><span class=o>,</span><span class=nn>time</span><span class=o>,</span><span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cv2</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>dlib</span>
</span></span></code></pre></div><p>Hah .. ! You guys may think why cv2, dlib and numpy libraries.
cv2 is for computervision, dlib used to plot facial landmarks over Drivers face,numpy is used to manipulate Image arrays.
Well okay.. Do we really need time library? Do we need to calculate time or something <strong>😒</strong>.. *(-_-)*? Ofcourse, Yes. We need to calculate time difference between blink of an eye. Its sounds intresting, isn&rsquo;t it? But I was irritated first time when I try to develop a algorithm to solve this program.</p><h3 id=recognize-face-and-eyes>Recognize Face and EYEs</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=n>cap</span><span class=o>=</span><span class=n>cv2</span><span class=o>.</span><span class=n>VideoCapture</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>detector</span><span class=o>=</span><span class=n>dlib</span><span class=o>.</span><span class=n>get_frontal_face_detector</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>predictor</span><span class=o>=</span><span class=n>dlib</span><span class=o>.</span><span class=n>shape_predictor</span><span class=p>(</span><span class=s2>&#34;shape_predictor_68_face_landmarks.dat&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_</span><span class=p>,</span><span class=n>frame</span><span class=o>=</span><span class=n>cap</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>gray</span><span class=o>=</span><span class=n>cv2</span><span class=o>.</span><span class=n>cvtColor</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span><span class=n>cv2</span><span class=o>.</span><span class=n>COLOR_BGR2GRAY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>faces</span><span class=o>=</span><span class=n>detector</span><span class=p>(</span><span class=n>gray</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>font</span><span class=o>=</span><span class=n>cv2</span><span class=o>.</span><span class=n>FONT_HERSHEY_SIMPLEX</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>face</span> <span class=ow>in</span> <span class=n>faces</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>=</span><span class=n>face</span><span class=o>.</span><span class=n>left</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=o>=</span><span class=n>face</span><span class=o>.</span><span class=n>top</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>h</span><span class=o>=</span><span class=n>face</span><span class=o>.</span><span class=n>right</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>k</span><span class=o>=</span><span class=n>face</span><span class=o>.</span><span class=n>bottom</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=c1>#cv2.rectangle(gray,(x,y),(h,k),(0,255,0),1)</span>
</span></span><span class=line><span class=cl>            <span class=n>landmarks</span><span class=o>=</span><span class=n>predictor</span><span class=p>(</span><span class=n>gray</span><span class=p>,</span><span class=n>face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>eye1</span><span class=o>=</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>36</span><span class=p>,</span> <span class=mi>42</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>eye1</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span> <span class=o>=</span> <span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>                <span class=n>y</span> <span class=o>=</span> <span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>                <span class=n>cv2</span><span class=o>.</span><span class=n>circle</span><span class=p>(</span><span class=n>gray</span><span class=p>,</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>),</span> <span class=mi>1</span><span class=p>,</span> <span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>eye2</span><span class=o>=</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>42</span><span class=p>,</span> <span class=mi>48</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>eye2</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span> <span class=o>=</span> <span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>                <span class=n>y</span> <span class=o>=</span> <span class=n>landmarks</span><span class=o>.</span><span class=n>part</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>                <span class=n>cv2</span><span class=o>.</span><span class=n>circle</span><span class=p>(</span><span class=n>gray</span><span class=p>,</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>),</span> <span class=mi>1</span><span class=p>,</span> <span class=p>(</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></div><p>🤧.. What? whats happening on above code ah? Looks like irritating..😖,
Dont worry I will explain hehe..hah..🥲😅.</p><p>Let me explain the above code, loading dlib facial landmarks and read an image frame from camera. Apply pretrained dlib facial landmarks alogrithm on resultant frame. There are total 68 facial landmarks (based on the model we choose).</p><p>In 68 landmarks, from 36 to 42 denote left eye and from 42 to 48 denotes right eye.
<img class=img-fluid alt=images/dlib.jpg src=https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/dlib.jpg loading=lazy width=647 height=616></p><h3 id=calculate-ear-eye-aspect-ratio>Calculate EAR (Eye Aspect Ratio)</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python3 data-lang=python3><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculus</span><span class=p>(</span><span class=n>l</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>x_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>5</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>y_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>5</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>p2_p6</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x_d</span><span class=o>+</span><span class=n>y_d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>x_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>4</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>y_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>4</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>p3_p5</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x_d</span><span class=o>+</span><span class=n>y_d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>x_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>y_d</span><span class=o>=</span><span class=p>(</span><span class=n>l</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>-</span><span class=n>l</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>p1_p4</span><span class=o>=</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>x_d</span><span class=o>+</span><span class=n>y_d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ratio</span><span class=o>=</span><span class=p>(</span><span class=n>p2_p6</span><span class=o>+</span><span class=n>p3_p5</span><span class=p>)</span><span class=o>/</span><span class=n>p1_p4</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ratio</span>
</span></span><span class=line><span class=cl><span class=n>eye</span><span class=o>=</span><span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>eye1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>p</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>6</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>5</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>eye</span><span class=o>.</span><span class=n>append</span><span class=p>([</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>ratio1</span><span class=o>=</span><span class=n>calclus</span><span class=p>(</span><span class=n>eye</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>eye</span><span class=o>=</span><span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>eye2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>p</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>6</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>p</span><span class=p>[</span><span class=mi>5</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=n>p</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>eye</span><span class=o>.</span><span class=n>append</span><span class=p>([</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>ratio2</span><span class=o>=</span><span class=n>calclus</span><span class=p>(</span><span class=n>eye</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>EAR</span><span class=o>=</span><span class=p>(</span><span class=n>ratio1</span><span class=o>+</span><span class=n>ratio2</span><span class=p>)</span><span class=o>/</span><span class=mi>4</span>
</span></span></code></pre></div><p>Yoooo,Hohooo 🥳, we calculated the EAR(Eye Aspect Ratio) very finely.
Really? How? I don&rsquo;t understand the calculus part.. it looks like bricksblock in a row with some mathematical expression.
<img class="img-fluid mx-auto d-block" alt=images/eye.jpeg src=https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/images/eye.jpeg loading=lazy width=436 height=295></p><p>Simply its calculates the <code>((p2-p6)+(p3-p6))/(p1-p4)</code> hehe..^_^</p><p>BOOM! we already achieved our final solution. Really? Ofcourse, Yes. we just need a loop to read frames from the camera and calculate EAR difference between two consecutive seconds.So we have to find the time difference and check if the EAR crossed threshhold values then check if the time difference between last blink time and present time crosses 2 seconds, then it means the driver going to sleep. So we need to play a alarm to wake him up.That&rsquo;s it..! Done..🥲😌</p><p>I think its fine and I really dont want to explain more than this 😜🙃.</p><p><a href=files/Detection.py>detection_.py</a></p><p>Hope you guys like this and Subscribe my Utube account 😂😂.</p><hr><h5 align=center id=thanks-for-reading>Thanks for reading!</h5></div><hr><div class="post-navs d-flex mb-3 justify-content-evenly"><div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
<a href=https://g00g1y5p4.github.io/posts/imagrestorationusinggans_1/>Image Restoration Using GAN's Part-1</a></div><div class="post-nav post-next"><a href=https://g00g1y5p4.github.io/posts/vehicleaccidentdetectionusingfpga/>Vehicle Accident Detection Using FPGA</a>
<i class="fas fa-fw fa-chevron-right"></i></div></div><section class=related-posts-wrapper><h3>Related Posts</h3><ul class=related-posts><li><a href=https://g00g1y5p4.github.io/posts/imagerestorationusinggans_2/>Image Restoration Using GAN's Part-2</a></li><li><a href=https://g00g1y5p4.github.io/posts/imagrestorationusinggans_1/>Image Restoration Using GAN's Part-1</a></li><li><a href=https://g00g1y5p4.github.io/posts/2048withpython/>2048 With Python</a></li><li><a href=https://g00g1y5p4.github.io/posts/simplevideocallapp/>A Simple Video Call App With Python Sockets</a></li></ul></section></div></article></div></div><aside class="col-lg-4 sidebar d-flex"><div class=container><section class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Akash Thota" src=https://g00g1y5p4.github.io/images/me.jpg loading=lazy></div><div class="col-12 profile-meta"><div class=profile-name>Akash Thota</div><div class=profile-bio>Intrested in integration Machine Learning with Computer Vision</div><div class=profile-company><i class="fas fa-fw fa-building"></i> ...</div><br><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i> India</div><br><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=https://g00g1y5p4.github.io/about/> About Me</a></div><br></div></div></section><section class="recent-posts row card component"><div class=card-body><h2 class=card-title>Recent Posts</h2><ul><li><a href=https://g00g1y5p4.github.io/posts/depthestimationofapothole/>Depth Estimation of a Pothole on Roads</a></li><li><a href=https://g00g1y5p4.github.io/posts/vehicleaccidentdetectionusingfpga/>Vehicle Accident Detection Using FPGA</a></li><li><a href=https://g00g1y5p4.github.io/posts/driverdrowsinessdetection/>Driver Drowsiness Detection</a></li><li><a href=https://g00g1y5p4.github.io/posts/imagrestorationusinggans_1/>Image Restoration Using GAN's Part-1</a></li><li><a href=https://g00g1y5p4.github.io/posts/imagerestorationusinggans_2/>Image Restoration Using GAN's Part-2</a></li></ul></div></section><section class="taxonomies row card component"><div class=card-body><h2 class=card-title><a href=https://g00g1y5p4.github.io/categories>Categories</a></h2><div><a href=https://g00g1y5p4.github.io/categories/gans/ class="badge bg-primary text-white rounded post-taxonomy" title="GAN's">GAN's
</a><a href=https://g00g1y5p4.github.io/categories/computer-vision/ class="badge bg-primary text-white rounded post-taxonomy" title="Computer Vision">Computer Vision
</a><a href=https://g00g1y5p4.github.io/categories/fpga/ class="badge bg-primary text-white rounded post-taxonomy" title=FPGA>FPGA
</a><a href=https://g00g1y5p4.github.io/categories/game/ class="badge bg-primary text-white rounded post-taxonomy" title=Game>Game
</a><a href=https://g00g1y5p4.github.io/categories/socket/ class="badge bg-primary text-white rounded post-taxonomy" title=Socket>Socket</a></div></div></section><section class="taxonomies row card component"><div class=card-body><h2 class=card-title><a href=https://g00g1y5p4.github.io/tags>Tags</a></h2><div><a href=https://g00g1y5p4.github.io/tags/image-processing/ class="badge bg-primary text-white rounded post-taxonomy" title="Image Processing">Image Processing
</a><a href=https://g00g1y5p4.github.io/tags/deep-learning/ class="badge bg-primary text-white rounded post-taxonomy" title="Deep Learning">Deep Learning
</a><a href=https://g00g1y5p4.github.io/tags/machine-learning/ class="badge bg-primary text-white rounded post-taxonomy" title="Machine Learning">Machine Learning
</a><a href=https://g00g1y5p4.github.io/tags/de10nano/ class="badge bg-primary text-white rounded post-taxonomy" title=DE10Nano>DE10Nano
</a><a href=https://g00g1y5p4.github.io/tags/face-detection/ class="badge bg-primary text-white rounded post-taxonomy" title="Face Detection">Face Detection
</a><a href=https://g00g1y5p4.github.io/tags/imageprocessing/ class="badge bg-primary text-white rounded post-taxonomy" title=ImageProcessing>ImageProcessing
</a><a href=https://g00g1y5p4.github.io/tags/nodemcu/ class="badge bg-primary text-white rounded post-taxonomy" title=NodeMCU>NodeMCU
</a><a href=https://g00g1y5p4.github.io/tags/opencv/ class="badge bg-primary text-white rounded post-taxonomy" title=openCV>openCV</a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" target=_blank href=https://discord.com/invite/g00g1y5p4 title=Discord rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-discord"></i>
</a><a class="nav-link social-link" href=mailto:g00g1y5p4@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/g00g1y5p4 title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://linkedin.com/in/g00g1y5p4 title=LinkedIn rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-linkedin-in"></i>
</a><a class="nav-link social-link" target=_blank href=https://twitter.com/g00g1y5p4 title=Twitter rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-twitter"></i></a></nav><div class="copyright mb-2">Copyright © 2018-2022 Akash Thota. All Rights Reserved.</div></footer><script src=https://g00g1y5p4.github.io/js/bundle.min.21f40383829a5e09e1bc7814b9d60ac04991f88e25e212dc4d1f8335ea724d96.js integrity="sha256-IfQDg4KaXgnhvHgUudYKwEmR+I4l4hLcTR+DNepyTZY=" crossorigin=anonymous defer></script><script defer src=https://g00g1y5p4.github.io/js/viewer.min.d5e689af442b462d0316719f47a5500dee615db035e8fb1b699f07fefa700fd1.js integrity="sha256-1eaJr0QrRi0DFnGfR6VQDe5hXbA16PsbaZ8H/vpwD9E=" crossorigin=anonymous></script><script defer src=https://g00g1y5p4.github.io/js/katex.min.420100d264e66fa287a9e08a59a7ebc37c67ea27d3fe010c94a77e03dd06d3fc.js integrity="sha256-QgEA0mTmb6KHqeCKWafrw3xn6ifT/gEMlKd+A90G0/w=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-213801925-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>