<!doctype html><html lang="en"
   data-mode="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Depth Estimation of a Pothole on Roads | 0x4ka5h&#39;s Blog</title><link rel="apple-touch-icon" href="https://0x4ka5h.github.io/images/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="https://0x4ka5h.github.io/images/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="https://0x4ka5h.github.io/images/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="https://0x4ka5h.github.io/images/favicons/manifest.json">
<link rel="icon" href="https://0x4ka5h.github.io/images/favicons/favicon.ico">
<meta name="keywords" content="" />
<meta name="description" content="This project detects the potholes and estimate approximate depth of the detected potholes. And alert the driver based on the hazardness of the pothole." />

<meta itemprop="name" content="Depth Estimation of a Pothole on Roads">
<meta itemprop="description" content="This project detects the potholes and estimate approximate depth of the detected potholes. And alert the driver based on the hazardness of the pothole."><meta itemprop="datePublished" content="2021-12-31T07:34:48+08:30" />
<meta itemprop="dateModified" content="2021-12-31T07:34:48+08:30" />
<meta itemprop="wordCount" content="1212"><meta itemprop="image" content='https://0x4ka5h.github.io/posts/depthestimationofapothole/images/_card.png'>
<meta itemprop="keywords" content="" /><meta property="og:title" content="Depth Estimation of a Pothole on Roads" />
<meta property="og:description" content="This project detects the potholes and estimate approximate depth of the detected potholes. And alert the driver based on the hazardness of the pothole." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://0x4ka5h.github.io/posts/depthestimationofapothole/" /><meta property="og:image" content='https://0x4ka5h.github.io/posts/depthestimationofapothole/images/_card.png' /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-31T07:34:48+08:30" />
<meta property="article:modified_time" content="2021-12-31T07:34:48+08:30" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content='https://0x4ka5h.github.io/posts/depthestimationofapothole/images/_card.png'/>

<meta name="twitter:title" content="Depth Estimation of a Pothole on Roads"/>
<meta name="twitter:description" content="This project detects the potholes and estimate approximate depth of the detected potholes. And alert the driver based on the hazardness of the pothole."/>
<meta name="twitter:site" content="@0x4ka5h"/>
<link rel="preload" href="https://0x4ka5h.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css" integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin="anonymous" as="style" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://0x4ka5h.github.io/css/bundle.min.fcd024e77e7ca8dc30926e1b5389582b45bdb44482ee20d1ae3aae2c00de9817.css" integrity="sha256-/NAk5358qNwwkm4bU4lYK0W9tESC7iDRrjquLADemBc=" crossorigin="anonymous"></noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Consolas" type="text/css" media="all" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code" type="text/css" media="all" />
<style>
 body { font-family: 'Consolas'; }
 code { font-family: 'Fira Code'; }
 code { tab-size: 4; }
</style></head>
  <body><script src="https://0x4ka5h.github.io/js/bootstrap.min.062c2e66b557cb779d59cedff7e0cc76e84beb665a1076e474e87d940be44245.js" integrity="sha256-BiwuZrVXy3edWc7f9&#43;DMduhL62ZaEHbkdOh9lAvkQkU=" crossorigin="anonymous"></script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
  <div class="container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button><a class="navbar-brand me-3" href="https://0x4ka5h.github.io/">0x4ka5h&#39;s Blog
    </a>
    <button class="navbar-social-share" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSocialShare"
  aria-controls="offcanvasSocialShare" aria-label="Toggle social share">
  <i class="fas fa-share-alt"></i>
</button>

<div class="offcanvas offcanvas-bottom surface" tabindex="-1" id="offcanvasSocialShare" aria-labelledby="offcanvasSocialShare">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Share</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body">
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button"
      target="_blank" href="https://twitter.com/intent/tweet?title=Depth%20Estimation%20of%20a%20Pothole%20on%20Roads&url=https%3a%2f%2f0x4ka5h.github.io%2fposts%2fdepthestimationofapothole%2f">
      <i class="fab fa-fw fa-twitter"></i> Twitter
    </a>
    <a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button"
      target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2f0x4ka5h.github.io%2fposts%2fdepthestimationofapothole%2f">
      <i class="fab fa-fw fa-facebook-f"></i> Facebook
    </a>
  </div>
</div>
    <button class="navbar-settings" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings"
  aria-controls="offcanvasSettings" aria-label="Toggle settings">
  <i class="fas fa-ellipsis-v"></i>
</button>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasSettings">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Settings</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body">



<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> Font Size</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>


<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> Palette</label>
    </div>
    <div class="col-auto ms-auto">
      <a id="btnPalette" class="btn btn-sm btn-outline-primary" role="button" aria-label="palettePicker">
        <i class="fas fa-eye-dropper"></i>
      </a>
    </div>
  </form>
  <div class="mt-2 d-flex visually-hidden" id="palettePicker"><button type="button" id="palette-blue" aria-label="Blue"
        class="btn btn-sm palette" data-palette="blue">
      </button><button type="button" id="palette-blue-gray" aria-label="Blue Gray"
        class="btn btn-sm palette" data-palette="blue-gray">
      </button><button type="button" id="palette-brown" aria-label="Brown"
        class="btn btn-sm palette" data-palette="brown">
      </button><button type="button" id="palette-cyan" aria-label="Cyan"
        class="btn btn-sm palette" data-palette="cyan">
      </button><button type="button" id="palette-green" aria-label="Green"
        class="btn btn-sm palette" data-palette="green">
      </button><button type="button" id="palette-indigo" aria-label="Indigo"
        class="btn btn-sm palette" data-palette="indigo">
      </button><button type="button" id="palette-orange" aria-label="Orange"
        class="btn btn-sm palette" data-palette="orange">
      </button><button type="button" id="palette-pink" aria-label="Pink"
        class="btn btn-sm palette" data-palette="pink">
      </button><button type="button" id="palette-purple" aria-label="Purple"
        class="btn btn-sm palette" data-palette="purple">
      </button><button type="button" id="palette-red" aria-label="Red"
        class="btn btn-sm palette" data-palette="red">
      </button><button type="button" id="palette-teal" aria-label="Teal"
        class="btn btn-sm palette" data-palette="teal">
      </button><button type="button" id="palette-yellow" aria-label="Yellow"
        class="btn btn-sm palette" data-palette="yellow">
      </button></div>
</section>
</div>
</div>

    <div class="collapse navbar-collapse" tabindex="-1" id="navbarSupportedContent" aria-labelledby="navbarSupportedContent">
      
      <ul class="navbar-nav ms-auto"><li class="nav-item">
          <a class="nav-link" href="https://0x4ka5h.github.io/archives/">
            <i class="fas fa-fw fa-file-archive"></i>Archives
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://0x4ka5h.github.io/categories/">
            <i class="fas fa-fw fa-folder"></i>Categories
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://0x4ka5h.github.io/tags/">
            <i class="fas fa-fw fa-tags"></i>Tags
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="https://0x4ka5h.github.io/series/">
            <i class="fas fa-fw fa-columns"></i>Series
          </a>
        </li></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><nav class="row card component" aria-label="breadcrumb">
  <div class="card-body">
    <ol class="breadcrumb "><li class="breadcrumb-item"><a href="https://0x4ka5h.github.io/">Home</a></li><li class="breadcrumb-item"><a href="https://0x4ka5h.github.io/posts/">Posts</a></li><li class="breadcrumb-item active">Depth Estimation of a Pothole on Roads</li></ol>
  </div>
</nav>    <article class="row card component mb-4 post"><div class="post-panel-wrapper">
  <div class="d-flex flex-column component rounded post-panel">
    
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>
  
    

    
    
    
    
  </div>
</div>
<div class="card-body">
        <h1 class="card-title my-3">Depth Estimation of a Pothole on Roads
</h1><div class="post-meta"><span class="post-date" title="created on">
    <i class="fas fa-fw fa-calendar-alt"></i>Dec 31, 2021
  </span><span class="post-reading-time" title="reading time">
    <i class="fas fa-fw fa-coffee"></i>6 min read
  </span></div>
<div class="post-content mb-3"><h3 id="introduction">Introduction</h3>
<p>I knew you guys can&rsquo;t bear for long period for my presence with our new blogs. That&rsquo;s why this time I came up with a real-time developed project which is submitted to the Government of India.</p>
<p><a href="https://innovateindia.mygov.in/roadsafety-hackathon-2021/" target="_blank" rel="noopener noreferrer">Visit Hackathon website</a>
</p>
<p>A hackathon was conducted overall in India. After, 3 rounds of filtering we got selected for the semi-final round based on the prototype presentation. And we cleared that round with our prototype and as a result, we were gone into the finals. It&rsquo;s a hackathon called the Road Safety Hackathon conducted by the Ministry of Road Transport and Highways, Government of India.</p>
<p>As per recent studies, around 4000+ accidents (about 50% casualties) are observed due to potholes in India. However, this is only official data as per the available records. This doesn’t include the data related blaw, blaw, blaw&hellip;..  Fine. fine fine&hellip;&hellip;  Shit comes with shit only. Then why discuss it again?
Already, we all know this shit of information cause we daily see accidents happen on roads due to bad infrastructure. That bad infrastructure leads us to create an application that is used for the Government of India by changing Road Infrastructure based on our stored data and vehicle driver to escape from accidents by following our commands.</p>
<p>Chaaa&hellip;.Chaa.. why have these people made mistakes related to vehicles, roads, and safety? I&rsquo;m tired of solving these mistakes. I&rsquo;ll stop taking care of these problems and maybe this is the last blog about road safety, Accidents Prevention, and things that are related with vehicles also.</p>
<p>Random Reader (RR): &ldquo;Author!! You always wasting our time by telling nonsense. Come to the point.&rdquo;</p>
<p>Me: &ldquo;Damn. Seriously? Okay, stop kicking on my &hellip;,no. I will start.&rdquo;</p>
<p>RR: &ldquo;lamo&hellip; Quick.&rdquo;</p>
<h3 id="our-aim">Our Aim</h3>
<p>Deep learning and Web-based voice alert system based on depth estimation and Hazards of the detected potholes.</p>
<h4 id="brief-explanation-of-our-solution">Brief Explanation of our Solution</h4>
<p>Brief Explanation of our Solution</p>
<p>We created this application in two ways:</p>
<ol>
<li>Vehicles with Cameras and wifi connectors. These vehicles will detect potholes on road and send information to the cloud. The sent data will be categorized into levels of its hazards. If it returns medium or high risk, then the system will estimate the pothole depth using Deep learning techniques. At, the same time driver also got an alert from the system when there is a high risk with depth.</li>
<li>Vehicles with no facilities can use their mobile phone to access our web application. After giving the destination location, our system will guide the driver in a very safe and best way to reach the destination safely. Here, also the alert will go through sound and the driver can also see maps to visualize the pothole&rsquo;s distance from our current location.</li>
</ol>
<p>By alerting the driver when Potholes are ahead, we think they will care for us and take diversion or may go slowly to escape from accidents.</p>
<p>We actually use python for internal processing, so these are the required libraries.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span><span class="o">,</span> <span class="nn">tensorflow</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">tensorflow</span> <span class="kn">import</span> <span class="n">keras</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cv2</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">time</span>
</span></span></code></pre></div><p>We have used YoLov5 for pothole detection purposes cause my personal computer can&rsquo;t bear my model architecture and also it takes 3 days on the CPU. So we would love to use a predefined model. After a lot of case studies about predefined models, YoLov5 become the best match for our goal. But installing required software and libraries, we labeled them by hand on our dataset manually meaning picture by picture by drawing boxes. And we labeled potholes into 3 classes which are small, medium, and risk.</p>
<p>You know YoLov5, don&rsquo;t you..? YOLOv5 is a family of object detection architectures and models pretrained on the COCO dataset, and represents Ultralytics open-source research into future vision AI methods, incorporating lessons learned and best practices evolved over thousands of hours of research and development and &ldquo;goo gooooo goooo. Go and search about it online. I&rsquo;m not here to teach you about YoLo&rdquo;.</p>
<p>Some RR: <img class="img-fluid" alt="sadistic" src="https://0x4ka5h.github.io/posts/depthestimationofapothole/images/index.webp" loading="lazy"
   width="240" height="240"
   />

</p>
<p>Me: &ldquo;Jokes apart!.&rdquo; Once the level of hazards is detected, then we have to apply some image processing techniques that are used to highlight features at the edge of our various detected potholes. We have already trained a regressive model which will predict the Approx. depth of a pothole.</p>
<p>That&rsquo;s it, we have done a lot. Now we just need to send the information to cloud storage with GPS location and depth of pothole for others and the Government.</p>
<h4 id="estimating-depth-of-a-pothole">Estimating Depth of a Pothole</h4>
<p>Previously as I have said, we detect potholes using YoLov5 which uses convolution neural networks in their model architecture. Once we initialize the camera and other setup, the model takes the input as an image from the camera and returns information about the image and detected coordinates.</p>
<p>Download model weights <a href="files/best.pt">(trainedModel)</a>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="n">model</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;yolov5&#39;</span><span class="p">,</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;best.pt&#39;</span><span class="p">,</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">capturedFrame</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&#34;RandomRoadimg.jpg&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">capturedFrame</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">result</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">coordinatesList</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">xyxy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#coordinates of first detected pothole</span>
</span></span></code></pre></div><p><img class="img-fluid" alt="(outputImage)" src="https://0x4ka5h.github.io/posts/depthestimationofapothole/images/image0.jpg" loading="lazy"
   width="324" height="216"
   />

</p>
<p>[12 50 200 300]</p>
<p>Now, we need to send the detected part to the depth estimation model that was already trained with 200 epochs, 89% accuracy, and 0.02 loss error.</p>
<p>You guys may get doubts like if torch then why TensorFlow? if using TensorFlow then why use torch? One of our teammates is using torch always. When we are doing this project, we have less time so we divided our work. So he did detection and I estimate depth. I&rsquo;m very feasible with TensorFlow and their related frameworks like Keras, media pipe, etc.., So we don&rsquo;t have much time while we&rsquo;re submitting these files. Anyways, we achieve our goal, but not in an optimistic way.</p>
<p>Our depth estimation model is a regression model, as I said it&rsquo;s just a simple linear regression model. I didn&rsquo;t use any convolution neural networks in my model architecture. I just use Dense layers to Downsample the input image with a linear activation function.</p>
<p>Some RR: &ldquo;Author.! Is this a model? It&rsquo;s very simple. See, again you writing blogs about your works?  haha &quot;</p>
<p>Me: &ldquo;Yeah! It&rsquo;s a very simple model, but initially, I form a very big architecture with 16 convolution neural networks with 7 Max pooling and 2 Averagepooling with activation function relu for all layers and softmax for last one.&rdquo; For 1 epoch only my PC takes 6 hours and the accuracy is best with 82% with a loss error of 0.4334.</p>
<p>Me: That&rsquo;s why after a lot of tries I just trail this simple network and Boom. It works.</p>
<p>So, Lets try our model on a video.</p>
<p>Download model <a href="files/modelforDepth.h5">(DepthEstimation)</a>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="n">depthModel</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="s2">&#34;modelforDepth.h5&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&#34;imgDepths&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">imgArray</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">	<span class="n">image</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">img</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">decode_png</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">img</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">convert_image_dtype</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">img</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">[</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="s2">&#34;testImages/testing.mp4&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">fontScale</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">thickness</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">font</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">_</span><span class="p">,</span><span class="n">img</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">continue</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	<span class="n">coordinateLines</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">xyxy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="n">k</span><span class="o">=</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">coordinateLines</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">xyxyn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">k</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="n">img1</span><span class="o">=</span><span class="n">img</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">])]</span>
</span></span><span class="line"><span class="cl">				
</span></span><span class="line"><span class="cl">				<span class="n">img_</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img1</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">bluredImg</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">img_</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="mi">4400</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">_</span><span class="p">,</span><span class="n">thresh</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">bluredImg</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_BINARY</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">				<span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s2">&#34;imgDepths/omkay.png&#34;</span><span class="p">,</span><span class="n">thresh</span><span class="p">)</span>		
</span></span><span class="line"><span class="cl">				
</span></span><span class="line"><span class="cl">				<span class="n">toFindDepth</span> <span class="o">=</span> <span class="n">imgArray</span><span class="p">(</span><span class="s2">&#34;imgDepths/omkay.png&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">arr</span> <span class="o">=</span> <span class="n">depthModel</span><span class="p">(</span><span class="n">toFindDepth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">dep</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">				<span class="n">rect</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">dep</span><span class="p">))[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="s2">&#34; cm&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="n">font</span><span class="p">,</span> <span class="n">fontScale</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">thickness</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">LINE_AA</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])),(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">3</span><span class="p">])),(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				<span class="n">rect</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">,(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])),(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">3</span><span class="p">])),(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">				
</span></span><span class="line"><span class="cl">		<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nb">print</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="k">continue</span>
</span></span><span class="line"><span class="cl">		<span class="n">k</span><span class="o">+=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&#34;img&#34;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&#34;rect&#34;</span><span class="p">,</span><span class="n">rect</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="mi">27</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="k">break</span>
</span></span><span class="line"><span class="cl"><span class="n">v</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</span></span></code></pre></div><p><img class="img-fluid" alt="BoundedBoxed" src="https://0x4ka5h.github.io/posts/depthestimationofapothole/images/rect.png" loading="lazy"
   width="406" height="720"
   />


<img class="img-fluid" alt="DepthEstimated" src="https://0x4ka5h.github.io/posts/depthestimationofapothole/images/depth.png" loading="lazy"
   width="406" height="720"
   />

</p>
<p><a href="https://github.com/g00g1y5p4/roadSafteyHackthon" target="_blank" rel="noopener noreferrer">Download Code at g00g1y5p4&rsquo;s GitHub and follow for more soruces.</a>
</p>
<h5 align="center" id="thanks-for-reading">Thanks for reading!</h5>
</div><hr /><div class="post-navs d-flex mb-3 justify-content-evenly">
  <div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
    <a href="https://0x4ka5h.github.io/posts/vehicleaccidentdetectionusingfpga/">Vehicle Accident Detection Using FPGA
</a>
  </div><div class="post-nav post-next">
    <a href="https://0x4ka5h.github.io/about/">About
</a>
    <i class="fas fa-fw fa-chevron-right"></i>
  </div></div><section class="related-posts-wrapper">
    <h3>Related Posts</h3>
    <ul class="related-posts"><li><a href="https://0x4ka5h.github.io/posts/vehicleaccidentdetectionusingfpga/">Vehicle Accident Detection Using FPGA
</a></li><li><a href="https://0x4ka5h.github.io/posts/driverdrowsinessdetection/">Driver Drowsiness Detection
</a></li><li><a href="https://0x4ka5h.github.io/posts/imagrestorationusinggans_1/">Image Restoration Using GAN&#39;s Part-1
</a></li><li><a href="https://0x4ka5h.github.io/posts/imagerestorationusinggans_2/">Image Restoration Using GAN&#39;s Part-2
</a></li><li><a href="https://0x4ka5h.github.io/posts/2048withpython/">2048 With Python
</a></li></ul>
  </section></div>
    </article></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container">
    
    <section class="card row text-center profile component">
  <div class="card-body">
    <div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Akash Thota" src="https://0x4ka5h.github.io/images/me.jpg" loading="lazy"
  
   />
</div>
    <div class="col-12 profile-meta"><div class="profile-name">Akash Thota</div><div class="profile-bio"> Intrested about WEB 3.0 and Block Chain technologies</div><div class="profile-company"><i class="fas fa-fw fa-building"></i> ...</div><br /><div class="profile-location"><i class="fas fa-fw fa-map-marker-alt"></i> India</div><br /><div class="profile-about"><i class="fas fa-fw fa-user"></i><a href="https://0x4ka5h.github.io/about/"> About Me</a></div><br /></div>
  </div>
</section>
  <section class="recent-posts row card component">
  <div class="card-body">
    <h2 class="card-title">Recent Posts</h2>
    <ul><li><a href="https://0x4ka5h.github.io/posts/depthestimationofapothole/">Depth Estimation of a Pothole on Roads
</a></li><li><a href="https://0x4ka5h.github.io/posts/vehicleaccidentdetectionusingfpga/">Vehicle Accident Detection Using FPGA
</a></li><li><a href="https://0x4ka5h.github.io/posts/driverdrowsinessdetection/">Driver Drowsiness Detection
</a></li><li><a href="https://0x4ka5h.github.io/posts/imagrestorationusinggans_1/">Image Restoration Using GAN&#39;s Part-1
</a></li><li><a href="https://0x4ka5h.github.io/posts/imagerestorationusinggans_2/">Image Restoration Using GAN&#39;s Part-2
</a></li></ul>
  </div>
</section><section class="taxonomies row card component">
      <div class="card-body">
        <h2 class="card-title">
          <a href="https://0x4ka5h.github.io/categories">Categories</a>
        </h2>
        <div><a href="https://0x4ka5h.github.io/categories/gans/" class="badge bg-primary text-white rounded post-taxonomy" title="GAN&#39;s">
            GAN&#39;s
          </a><a href="https://0x4ka5h.github.io/categories/computer-vision/" class="badge bg-primary text-white rounded post-taxonomy" title="Computer Vision">
            Computer Vision
          </a><a href="https://0x4ka5h.github.io/categories/fpga/" class="badge bg-primary text-white rounded post-taxonomy" title="FPGA">
            FPGA
          </a><a href="https://0x4ka5h.github.io/categories/game/" class="badge bg-primary text-white rounded post-taxonomy" title="Game">
            Game
          </a><a href="https://0x4ka5h.github.io/categories/socket/" class="badge bg-primary text-white rounded post-taxonomy" title="Socket">
            Socket
          </a></div>
      </div>
    </section><section class="taxonomies row card component">
      <div class="card-body">
        <h2 class="card-title">
          <a href="https://0x4ka5h.github.io/tags">Tags</a>
        </h2>
        <div><a href="https://0x4ka5h.github.io/tags/image-processing/" class="badge bg-primary text-white rounded post-taxonomy" title="Image Processing">
            Image Processing
          </a><a href="https://0x4ka5h.github.io/tags/deep-learning/" class="badge bg-primary text-white rounded post-taxonomy" title="Deep Learning">
            Deep Learning
          </a><a href="https://0x4ka5h.github.io/tags/machine-learning/" class="badge bg-primary text-white rounded post-taxonomy" title="Machine Learning">
            Machine Learning
          </a><a href="https://0x4ka5h.github.io/tags/de10nano/" class="badge bg-primary text-white rounded post-taxonomy" title="DE10Nano">
            DE10Nano
          </a><a href="https://0x4ka5h.github.io/tags/face-detection/" class="badge bg-primary text-white rounded post-taxonomy" title="Face Detection">
            Face Detection
          </a><a href="https://0x4ka5h.github.io/tags/imageprocessing/" class="badge bg-primary text-white rounded post-taxonomy" title="ImageProcessing">
            ImageProcessing
          </a><a href="https://0x4ka5h.github.io/tags/nodemcu/" class="badge bg-primary text-white rounded post-taxonomy" title="NodeMCU">
            NodeMCU
          </a><a href="https://0x4ka5h.github.io/tags/opencv/" class="badge bg-primary text-white rounded post-taxonomy" title="openCV">
            openCV
          </a></div>
      </div>
    </section>
    
  </div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"><a class="nav-link social-link" target="_blank" href="https://discord.com/invite/0x4ka5h" title="Discord" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-discord"></i>
      </a><a class="nav-link social-link" href="mailto:0x4ka5h@gmail.com" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a><a class="nav-link social-link" target="_blank" href="https://github.com/0x4ka5h" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://linkedin.com/in/0x4ka5h" title="LinkedIn" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-linkedin-in"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://twitter.com/0x4ka5h" title="Twitter" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-twitter"></i>
      </a></nav>
<div class="copyright mb-2">
  Copyright © 2018-2022 Akash Thota. All Rights Reserved.
</div>
</footer>
<script src="https://0x4ka5h.github.io/js/bundle.min.403394dae10c9a55331063828078e412c1b7460825f4cf3b9321b6ea7b3cbf4d.js" integrity="sha256-QDOU2uEMmlUzEGOCgHjkEsG3Rggl9M87kyG26ns8v00=" crossorigin="anonymous" defer></script><script defer src="https://0x4ka5h.github.io/js/viewer.min.cc3d8f148dd93a57780291e7526163f8fcefe0d6ef79f06e6148524c66f82568.js" integrity="sha256-zD2PFI3ZOld4ApHnUmFj&#43;Pzv4NbvefBuYUhSTGb4JWg=" crossorigin="anonymous"></script><script defer src="https://0x4ka5h.github.io/js/katex.min.06cf79ee28247d85a151a3d520488e56c9c7d2e60fcc3810ce64225e62c658fb.js" integrity="sha256-Bs957igkfYWhUaPVIEiOVsnH0uYPzDgQzmQiXmLGWPs=" crossorigin="anonymous"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-213801925-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>
